<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ë„ì±…ë°© - ì§€ì  ê´€ë¦¬ì ë¡œê·¸ì¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--grape-900:#1a0a2e;--grape-700:#4a2c7a;--grape-600:#5e3d8c;--grape-500:#7c4dff;--grape-100:#e9d8fd;--grape-50:#f5f0ff;--text-light:#666}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Pretendard',sans-serif;background:linear-gradient(135deg,var(--grape-900),var(--grape-700));min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem}
        .back{position:absolute;top:2rem;left:2rem;color:white;text-decoration:none;opacity:0.8}
        .login-box{background:white;border-radius:20px;padding:2.5rem;width:100%;max-width:420px;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
        .login-header{text-align:center;margin-bottom:2rem}
        .login-icon{width:70px;height:70px;margin:0 auto 1rem;background:linear-gradient(135deg,#f59e0b,#d97706);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:1.8rem}
        .login-title{font-family:'Noto Serif KR',serif;font-size:1.5rem;font-weight:700;color:var(--grape-900)}
        .login-subtitle{color:var(--text-light);font-size:0.9rem}
        .form-group{margin-bottom:1rem}
        .form-label{display:block;font-weight:600;color:var(--grape-900);margin-bottom:0.4rem;font-size:0.85rem}
        .form-input,.form-select{width:100%;padding:0.85rem 1rem;border:2px solid var(--grape-100);border-radius:10px;font-size:0.95rem;background:var(--grape-50)}
        .form-input:focus,.form-select:focus{outline:none;border-color:var(--grape-500);background:white}
        .form-check{display:flex;align-items:center;gap:0.5rem;font-size:0.85rem;color:var(--text-light);margin:1rem 0}
        .login-btn{width:100%;padding:1rem;background:linear-gradient(135deg,#f59e0b,#d97706);color:white;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer}
        .login-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(245,158,11,0.4)}
        .error-msg{color:#ef4444;font-size:0.85rem;margin-top:0.5rem;display:none}
        .ad-section{margin-top:1.5rem;padding:1rem;background:#f8f9fa;border-radius:10px;text-align:center;border:1px dashed #dee2e6}
        .ad-label{font-size:0.65rem;color:#adb5bd;text-transform:uppercase;letter-spacing:1px;margin-bottom:0.5rem}
        .ad-btns{display:flex;gap:0.5rem;justify-content:center}
        .ad-btn{padding:0.6rem 1rem;border-radius:6px;font-size:0.8rem;text-decoration:none}
        .ad-coupang{background:#e31937;color:white}
        .ad-google{background:white;border:1px solid #4285f4;color:#4285f4}
        .toast{position:fixed;top:2rem;right:2rem;padding:1rem 1.5rem;background:white;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,0.15);display:none;z-index:100}
        .toast.show{display:flex;align-items:center;gap:0.5rem}
        .toast.success{border-left:4px solid #10b981}
        .toast.error{border-left:4px solid #ef4444}
    </style>
</head>
<body>
    <div class="toast" id="toast"></div>
    <a href="index.html" class="back">â† í™ˆìœ¼ë¡œ</a>
    <div class="login-box">
        <div class="login-header">
            <div class="login-icon">ğŸª</div>
            <h1 class="login-title">ì§€ì  ê´€ë¦¬ì</h1>
            <p class="login-subtitle">ì§€ì  ìš´ì˜ ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
        </div>
        <form onsubmit="return handleLogin(event)">
            <div class="form-group">
                <label class="form-label">ì§€ì  ì„ íƒ</label>
                <select class="form-select" id="branchSelect" required></select>
            </div>
            <div class="form-group">
                <label class="form-label">ê´€ë¦¬ì ID</label>
                <input type="text" class="form-input" id="branchId" placeholder="branch_admin" required>
            </div>
            <div class="form-group">
                <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" class="form-input" id="branchPw" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                <p class="error-msg" id="errorMsg">ë¡œê·¸ì¸ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            </div>
            <label class="form-check"><input type="checkbox"> ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€</label>
            <button type="submit" class="login-btn">ë¡œê·¸ì¸</button>
        </form>
        <p style="text-align:center;margin-top:1rem;font-size:0.8rem;color:var(--text-light)">í…ŒìŠ¤íŠ¸: mokpo / 1234 ë˜ëŠ” ganghwa / 1234</p>
        <div class="ad-section">
            <div class="ad-label">Sponsored</div>
            <div class="ad-btns">
                <a href="https://www.coupang.com" target="_blank" class="ad-btn ad-coupang">ğŸ›’ ì¿ íŒ¡</a>
                <a href="https://www.google.com" target="_blank" class="ad-btn ad-google">Google</a>
            </div>
        </div>
    </div>
    <script src="podo-db.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded',()=>{
            const session=PodoSession.get();
            if(session&&session.type==='branch')location.href='dashboard-branch.html';
            populateBranches();
        });
        function populateBranches(){
            const branches=PodoDB.get('branches')||[];
            const select=document.getElementById('branchSelect');
            select.innerHTML='<option value="">ì§€ì ì„ ì„ íƒí•˜ì„¸ìš”</option>'+branches.filter(b=>b.status==='active').map(b=>`<option value="${b.id}">${b.name}</option>`).join('');
        }
        function handleLogin(e){
            e.preventDefault();
            const branchId=document.getElementById('branchSelect').value;
            const id=document.getElementById('branchId').value;
            const pw=document.getElementById('branchPw').value;
            if(!branchId){showToast('ì§€ì ì„ ì„ íƒí•˜ì„¸ìš”','error');return false;}
            const admins=PodoDB.get('branchAdmins')||[];
            const admin=admins.find(a=>a.id===id&&a.password===pw&&a.branchId===branchId);
            if(admin){
                PodoSession.set(admin,'branch',branchId);
                showToast('ë¡œê·¸ì¸ ì„±ê³µ!','success');
                setTimeout(()=>location.href='dashboard-branch.html',500);
            }else{
                document.getElementById('errorMsg').style.display='block';
                showToast('ë¡œê·¸ì¸ ì‹¤íŒ¨','error');
            }
            return false;
        }
        function showToast(msg,type){
            const t=document.getElementById('toast');
            t.className='toast show '+type;
            t.innerHTML=(type==='success'?'âœ“':'âŒ')+' '+msg;
            setTimeout(()=>t.classList.remove('show'),3000);
        }
    </script>
</body>
</html>
